{% extends "graphs/base_template.html" %}


{% block content %}

  <div class="starter-template">
    <h1>TSES3002V Swarm Project Group A</h1>
    <p class="lead">Ottawa average temperature and precipitation from 1929-2018</p>
  </div>

  <div class="row">
    <div id="climate" style="width:100%; height:800px;"></div>
  </div>

  <script type="text/javascript">
    $(document).ready(function(){
      var endpoint = 'api/chart/data'
      var climateData = []
      var climeLabels = []

      $.ajax({
        method: "Get",
        url: endpoint,
        success: function(data){
          climateData = data.climate_data
          climateLabels = data.climate_labels
          climateChart()
        }
        // error: function(error_data){
        //   console.log("error")
        // }
      })

      function climateChart(){
        var data = [{
          x: climateLabels,
          y: climateData,
          type: 'line',
          marker: {
            color: "#23b7e5",
          },
        }];
        var layout = {
          title: "Climate data for Ottawa",
          margin: {l:200},
        };

        Plotly.newPlot('climate', data, layout)
      }
    })
  </script>

{% endblock %}
